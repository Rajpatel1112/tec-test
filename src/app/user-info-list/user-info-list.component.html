<div class="header">
  <div class="header-content">
    User Details
  </div>
  <div>
    <button class="btn btn-danger" (click)="onLogout()">Logout</button>
  </div>
</div>

<div class="container">
  <!-- Left Form -->
  <div class="form-section">
    <h3>Add / Edit the single record Here</h3>
    <form [formGroup]="recordForm">

      <div class="form-group">
        <label>First Name</label>
        <input type="text" formControlName="firstName" />
      </div>

      <div class="form-group">
        <label>Last Name</label>
        <input type="text" formControlName="lastName" />
      </div>

 <div class="form-group">
  <label>Phone (Primary)</label>
  <input type="text" formControlName="phone" (input)="formatPhone($event)" />
  <div class="error" 
       *ngIf="recordForm.get('phone')?.hasError('required') && recordForm.get('phone')?.touched">
    Phone number is required
  </div>
  <div class="error" 
       *ngIf="recordForm.get('phone')?.hasError('pattern') && recordForm.get('phone')?.touched">
    Enter a valid 10-digit phone number
  </div>
</div>

<div class="form-group">
  <label>Email</label>
  <input type="email" formControlName="email" />
  <div class="error" 
       *ngIf="recordForm.get('email')?.hasError('required') && recordForm.get('email')?.touched">
    Email is required
  </div>
  <div class="error" 
       *ngIf="recordForm.get('email')?.hasError('email') && recordForm.get('email')?.touched">
    Enter a valid email address
  </div>
</div>


      <div class="form-group">
        <label>Address</label>
        <input type="text" formControlName="address" />
      </div>

      <div class="row">
        <div class="form-group half-width">
          <label>State</label>
      <select formControlName="state" (change)="onStateChange(($any($event.target)).value)">
  <option *ngFor="let state of states" [value]="state.code">{{ state.name }}</option>
</select>

        </div>

        <div class="form-group half-width">
          <label>District</label>
          <select formControlName="district" [disabled]="!filteredDistricts.length">
            <option *ngFor="let district of filteredDistricts" [value]="district.code">{{ district.name }}</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="form-group half-width">
          <label>City</label>
          <input type="text" formControlName="city" />
        </div>

        <div class="form-group half-width">
          <label>Zip Code</label>
          <input type="text" formControlName="zip" />
          <div class="error" *ngIf="recordForm.get('zip')?.hasError('pattern')">
            Enter a valid 5-digit zip code
          </div>
        </div>
      </div>

      <div class="button-row">
        <button class="btn btn-outline-primary" type="button"
          (click)="recordForm.reset(); filteredDistricts = []">
          Cancel
        </button>
        <button class="btn btn-primary" type="button" (click)="onSave()">
          {{ saveButtonLabel }}
        </button>
      </div>
    </form>
  </div>

  <!-- Right Table -->
  <div class="grid-section">
    <h3>Show the list of records</h3>
    <ag-grid-angular class="ag-theme-balham"  style="width: 100%; height: 500px;" [gridOptions]="gridOptions"
      [rowData]="rowData" [columnDefs]="columnDefs" [pagination]="true" [paginationPageSize]="8">
    </ag-grid-angular>
  </div>
</div>
